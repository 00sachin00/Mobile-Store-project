const purchaseBtn=document.querySelectorAll(".btn-purchase"),buyContainer=document.querySelector(".buy-container"),closeBuy=document.querySelector(".close-buy"),successMsg=document.querySelector(".buy-success"),inputs=document.querySelectorAll(".buy-input"),buyBtn=document.querySelector(".buy-btn"),featuredItem=document.querySelectorAll(".featured_item"),notifyMe=document.getElementById("notify-me"),notifyMsg=document.querySelector(".notify-msg"),inputArr=[];function hideNotify(){notifyMsg.style.display="none"}function hideSuccessMsg(){successMsg.style.display="none"}function showSuccess(){inputs.forEach(a=>{a.value.length>0&&inputArr.push(a.value)}),inputArr.length>=5?(successMsg.style.display="flex",buyContainer.style.display="none",setTimeout(hideSuccessMsg,3e3)):alert("Please fill all your details")}notifyMe.addEventListener("click",()=>{notifyMsg.style.display="flex",setTimeout(hideNotify,3e3)}),buyBtn.addEventListener("click",showSuccess);const contactBtn=document.getElementById("reg-btn"),contactUs=document.querySelector(".contact-us"),contactClose=document.querySelector(".close-contact");contactBtn.addEventListener("click",()=>{contactUs.classList.toggle("active"),contactUs.style.transition="all 200ms linear",contactUs.style.transform="scale(0.1)",setTimeout(()=>{contactUs.style.transform="scale(1)"},1)}),contactClose.addEventListener("click",()=>{contactUs.style.transform="scale(0.1)",setTimeout(()=>{contactUs.classList.remove("active")},200)});const mobiles=document.querySelector(".mobiles"),showMobiles=document.getElementById("mobileLink"),mainSection=document.getElementById("main-sec"),products=document.getElementById("products"),productsDiv=document.createElement("div");productsDiv.appendChild(products);const moreBtn=document.getElementById("more-pd-btn");moreBtn.style.display="none",mobiles.innerHTML=productsDiv.innerHTML;const moreMobiles=document.createElement("div"),pContainer=document.createElement("div");function showmore(){mobiles.style.display="block",mobiles.appendChild(pContainer);let a=document.createElement("section");a.appendChild(mobiles),mainSection.innerHTML=a.innerHTML,moreBtn.style.display="none"}pContainer.setAttribute("class","container"),pContainer.appendChild(moreMobiles),showMobiles.addEventListener("click",()=>{showmore()});const homepage=document.getElementById("home-sec"),homebtn=document.getElementById("overview");homepage.style.display="block";let homeDiv=document.createElement("div");homeDiv.appendChild(homepage),mainSection.innerHTML=homeDiv.innerHTML,mainSection.append(productsDiv),moreBtn.style.display="block",homebtn.addEventListener("click",()=>{homepage.style.display="block";let a=document.createElement("div");a.appendChild(homepage),mainSection.innerHTML=a.innerHTML,mainSection.append(productsDiv),moreBtn.style.display="block"});const closeMyOrders=document.getElementById("close-myorders"),openMyOrders=document.querySelector(".my-orders-btn"),myOrdersBox=document.querySelector(".my-orders-container");async function MyOrdersData(){(await fetch("/getorders")).json().then(b=>{for(let a=0;a<b.length;a++){console.log(Number(b[a].price));let d=document.querySelector(".myorders-body"),c=document.createElement("tr");c.setAttribute("class","table-row"),c.setAttribute("id",`${b[a].id}`),c.innerHTML=`<td>
            <span class="myorder-title"><img src="${b[a].image}" style="display: inline;" alt=""><p style="display: inline; text-align:center; margin:auto;">${b[a].product_name}</p></span>
            </td>
            <td class="myorder-price" "><span></span>${b[a].price}</td>
            <td class="qty"><input type="number" name="" id="" disabled value="${b[a].quantity}"></td>
            <td class="myorder-total" >Rs ${parseFloat(b[a].price.match(/(\d+)/))*parseInt(b[a].quantity)}</td>
            <td class="cancel-order" title='Cancel Order'><i onClick="deleteOrder(event)" class="fa-solid fa-trash-can"></i></td>`,d.appendChild(c)}})}async function deleteOrder(a){let b=document.querySelector(".order-canceled");b.style.transition="all 700ms ease-in-out",b.style.transform="translateX(0)",setTimeout(()=>{b.style.transform="translateX(350px)"},2e3);let c=a.currentTarget.parentElement.parentElement.id;a.currentTarget.parentElement.parentElement.remove(),await fetch("/deleteorder",{method:"Post",mode:"cors",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({id:c})})}async function getProducts(){(await fetch("/getproduct")).json().then(b=>{for(let a=0;a<b.length;a++){let d=`rgb(${255*Math.random()}, ${255*Math.random()},${255*Math.random()})`,c=document.createElement("article");c.setAttribute("class","product rproduct4 spacing"),c.setAttribute("style",`background: radial-gradient(${d},rgb(${255*Math.random()}, ${255*Math.random()},${255*Math.random()}))`),c.innerHTML=`<img src="${b[a].product_image}" alt="" class="product_image">
            <h3 class="product_title">${b[a].product_name}</h3>
            <p class="product_description">${b[a].description}</p>
            <a class="btn btn-purchase" onclick="showContainer(event)" style='background-color:${d};'>Purchase</a>
            <span class="product-price">Rs ${b[a].price}</span>`,moreMobiles.appendChild(c)}})}async function getOtherProducts(){let b=await fetch("/getothers"),a=document.createElement("div"),c=document.createElement("div");a.setAttribute("class","accessories"),c.appendChild(a),b.json().then(d=>{for(let b=0;b<d.length;b++){let e=document.createElement("div");e.innerHTML=`<div class="accessory">
                                    <img src="${d[b].product_image}">
                                    <div class="acc_details">
                                        <h2>${d[b].product_name}</h2>
                                        <p>${d[b].description}</p>
                                        <div class="buttons">
                                            <button onClick='showAccessoryContainer(event)'>Buy</button>
                                            <span>Rs ${d[b].price}</span>
                                        </div>
                                    </div>
                                </div>`,a.appendChild(e)}let f=document.getElementById("other-accessories");f.addEventListener("click",()=>{mainSection.innerHTML=c.innerHTML,moreBtn.style.display="none"})})}openMyOrders.addEventListener("click",()=>{myOrdersBox.style.display="block",myOrdersBox.style.transform="scale(0.1)",myOrdersBox.style.transition="all 100ms linear",setTimeout(()=>{myOrdersBox.style.transform="scale(1)"},1)}),closeMyOrders.addEventListener("click",()=>{myOrdersBox.style.transform="scale(0.1)",setTimeout(()=>{myOrdersBox.style.display="none"},100)}),MyOrdersData(),getProducts(),getOtherProducts();const productImgInput=document.querySelector("#image-input");function showContainer(a){buyContainer.style.display="block",a=a||window.Event,productImgInput.value=`${a.currentTarget.parentElement.querySelector(".product_image").attributes.src.value}`;let c=document.getElementById("title-text"),b=a.currentTarget.parentElement.querySelector(".product_title").innerText||a.currentTarget.querySelector(".product_title")||a.currentTarget.querySelector("p").querySelector(".product_title");b.length>1&&(c.value=b);let d=document.getElementById("price-input"),e=a.currentTarget.nextSibling.nextSibling.innerText||a.currentTarget.nextSibling.innerText;d.value=e}function showFeaturedContainer(a){buyContainer.style.display="block",a=a||window.Event;let c=document.getElementById("price-input"),d=document.getElementById("title-text"),b=a.currentTarget.querySelector("p").innerText||a.currentTarget.nextSibling.innerText,e=a.currentTarget.querySelector("p").querySelector("span").innerText,f=a.currentTarget.querySelector("img").src;b.length>1&&(d.value=b),c.value=e,productImgInput.value=f}function showAccessoryContainer(a){buyContainer.style.display="block",a=a||window.Event;let c=document.getElementById("price-input"),d=document.getElementById("title-text"),b=a.currentTarget.parentElement.parentElement.querySelector("h2").innerText,e=a.currentTarget.parentElement.querySelector("span").innerText,f=a.currentTarget.parentElement.parentElement.parentElement.querySelector("img").src;console.log("title"),b.length>1&&(d.value=b),c.value=e,productImgInput.value=f}closeBuy.addEventListener("click",()=>{buyContainer.style.display="none"})